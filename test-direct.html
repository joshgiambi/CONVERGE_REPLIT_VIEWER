<!DOCTYPE html>
<html>
<head>
    <title>CONVERGE Direct Test</title>
    <style>
        body { background: #000; color: #fff; font-family: Arial; padding: 20px; }
        .status { background: #1a1a1a; padding: 20px; border-radius: 8px; margin: 20px 0; }
        .working { color: #10b981; }
        .error { color: #ef4444; }
        button { background: #4338ca; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; margin: 5px; }
    </style>
</head>
<body>
    <h1>CONVERGE DICOM Platform - Direct Test</h1>
    <div class="status">
        <h3>System Status</h3>
        <div id="api-status">Testing API...</div>
        <div id="patient-status">Testing Patient Data...</div>
        <div id="image-status">Testing CT Images...</div>
    </div>
    
    <div class="status">
        <h3>Quick Access</h3>
        <button onclick="window.location.href='/dicom-viewer?studyId=4'">Open DICOM Viewer</button>
        <button onclick="window.location.href='/'">Patient Manager</button>
        <button onclick="testAPI()">Test API</button>
    </div>

    <script>
        async function testAPI() {
            try {
                // Test health
                const health = await fetch('/api/health').then(r => r.json());
                document.getElementById('api-status').innerHTML = `<span class="working">✓ API: ${health.status}</span>`;
                
                // Test patients
                const patients = await fetch('/api/patients').then(r => r.json());
                document.getElementById('patient-status').innerHTML = `<span class="working">✓ Patients: ${patients.length} loaded</span>`;
                
                // Test CT images
                const series = await fetch('/api/series/4').then(r => r.json());
                if (series.images) {
                    document.getElementById('image-status').innerHTML = `<span class="working">✓ CT Images: ${series.images.length} slices available</span>`;
                }
            } catch (error) {
                console.error('Test failed:', error);
                document.getElementById('api-status').innerHTML = `<span class="error">✗ API Error: ${error.message}</span>`;
            }
        }
        
        // Auto-test on load
        testAPI();
    </script>
</body>
</html>